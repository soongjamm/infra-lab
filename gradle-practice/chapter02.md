## Chapter02: 그레이들과 빌드

### 그레이들의 빌드

빌드란?

- 컴파일-테스트-레포팅 을 하는 일련의 과정

빌드 자동화

- 명령어를 이용한
- 시간에 따른
- 특정 조건에 따른

그레이들의 빌드 구성요소

- 초기화, 설정, 빌드 스크립트
- 속성파일
- 환경변수, 명령어옵션
- 프로젝트 디렉토리 buildSrc

그레이들 스크립트

- gradle 스크립트
    - 초기화 스크립트 (init.gradle)
        - 가장 먼저 실행되는 스크립트.
    - 설정 스크립트 (settings.gradle)
        - 빌드 설정 파일
    - 빌드 스크립트 (build.gradle)
        - 빌드 수행과 관련된 내용 기술
- 기본 객체
    - gradle 객체
    - settings 객체
    - project 객체
- 위 순서로 서로 관련이 있음

속성파일

- gradle.properties
- 빌드 환경 속성 내용
- project 하위에 위치함.

환경변수

- 시스템에 등록한 설치정보
- 명령어 옵션 빌드와 관련된 내용 기술시, 빌드를 수행하기 위해 관련 정보를 전달
- buildSrc :  디렉토리. 빌드 수행시 클래스파일이나 플러그인 등 공통적으로 사용하는 부분에 대해 저장

### 그레이들의 빌드 수행

**빌드 수행 단계**

- 명령어 해석/수행
- 그래들 수행
- **==그레이들생명주기=**
- 스크립트 초기화
    - 스크립트 파일 확인, 읽기
    - 멀티인지 싱글 프로젝트인지
    - Project 객체 생성
    - 명령어 옵션 및 인수 설정
- Projeect Settings
    - 참조중인 라이브러리 확인
    - Task 객체 및 테스트 그래프 생성
    - 테스크 그래프는 빌드를 수행하기 위한 테스크를 확인함.
        - 의존관계 확인.
        - 선행관계분석.
        - 이것을 테스크 그래프로. (=테스크간의 순서도)
- Task 실행
    - 테스크를 추출 및 실행
- **===============**
- 결과 출력

### 4. 그레이들의 스크립트 파일

- 처리문
    - def id = ‘gradle’ ..
- 처리문에 대한 스크립트 블록
    - repositories { mavenCentral() } ...

대표적인 스크립트 블록

- repositories : 저장소 설정
- dependencies : 의존관계 설정
- buildscript : 빌드 스크립트 클래스 패스 설정
- initscript : 초기화 스크립트
- configurations : 환경 구성 설정
- allprojects : 서브 포함 모든 프로젝트 설정
- subprojects : 서브 프로젝트 설정
- artifacts : 빌드 결과에 대한 설정

그레이들의 변수

- ===사용범위 : 그레이들 모든 스크리브 파일 ===
- 지역 변수 : 스크립트 안에 선언된, 선선된 부분에서 영향력
- 시스템 속성 : 시스템 관련 정보를 저장하는 변수
    - 명령에서 인수로 전달하는 방법
    (--system-prop, -D속성명=속성값)
    - 속성파일을 사용하는 방법 
    gradle.properties 설정 파일
    systemProp.message=hello
- 확장 속성 : 도메인 객체 확장 용도로 사용되는 변수
    - ext { extPro1 = ‘pro1’ } ← 선언
    ext.extPro1  ← 사용
- === 사용범위: 빌드 스크립트 ===
- 프로젝트 속성 : 프로젝트에서 사용되는 변수

